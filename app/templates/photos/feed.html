{% extends "base.html" %}
{% block content %}
<div class="row text-center">
  <h3>Out of Office</h3>
  <p>Check out all of the great holiday photos below!</p>
  <p>Be sure to leave a "like" and comment on the photos you like most!</p>
<br />
</div>
<div class="container-lg">
  <div class="row row-cols-1 row-cols-md-2 g-4">
    {% for photo in photos.items %}
    <div class="col">
      <div class="card">
        {% if current_user.is_authenticated == True %}
          <a href="{{ url_for('photos.view_photo', id=photo.id )}}">
            <img src="{{ photo.url }}" class="card-img-top" alt="..." />
          </a>
        {% else %}
          <img src="{{ photo.url }}" class="card-img-top" alt="..." />
        {% endif %}
        <div class="card-body">
          <h5 class="card-title">{{ photo.title }}</h5>
          {% if current_user.is_authenticated == True %}
          <div class="row">
            <div class="col">
              <form method="POST" action="{{ url_for('photos.like_photo', id=photo.id)}}">
                <button type="submit" class="btn btn-primary" name="liked">
                  <i class="fas fa-thumbs-up"></i>
                </button>
              </form>
            </div>
          {% endif %}
            <div class="col">
              <small><i class="fas fa-thumbs-up"></i>: {{ photo.likes }}</small>
            </div>
          </div>
          <small><em>Uploaded by {{ photo.user_uploaded_by }} on {{ photo.user_added_datetime.date() }}</em></small>
          <p class="card-text">
            {{ photo.description }}
          </p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <div class="row m-5">
    <!-- Pagination setup following Python Flask Tutorial YouTube series -->
    <!-- Please see readme for full crediting details -->
    <nav aria-label="Page navigation">
      <ul class="pagination justify-content-center">
      {% for page_num in photos.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
        {% if page_num %}
          {% if photos.page == page_num %}
          <li class="page-item active">
            <a class="page-link" href="{{ url_for('photos.photo_feed', page=page_num)}}">{{ page_num }}</a>
          </li>
          {% else %}
          <li class="page-item">
            <a class="page-link" href="{{ url_for('photos.photo_feed', page=page_num)}}">{{ page_num }}</a>
          </li>
          {% endif %}
        {% else %}
          ...
        {% endif %}
      {% endfor %}
      </ul>
    </nav>
  </div>
</div>
{% endblock %}