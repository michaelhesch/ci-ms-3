{% extends "base.html" %}
{% block content %}
<div class="container-lg">
  <div class="py-4 text-center">
    <h3>{{ user.username|capitalize }}'s Profile</h3>
    <p>E-Mail Address: {{ user.email }}</p>
    <p>About Me: {{ user.about_me }}</p>
    <div>
      <a class="btn btn-outline-primary m-1" href="{{ url_for('main.edit_profile', id=user.id) }}">Edit About Me</a>
      <a class="btn btn-outline-primary m-1" href="{{ url_for('photos.upload_photo') }}">Add A Photo!</a>
    </div>
    <hr>
    <h3 class="text-center">{{ user.username|capitalize }}'s Photos</h3>
    {% if photos %}
      <p class="text-center">Below are all of the photos you have added to the platform!</p>
    {% else %}
      <p class="text-center">You have not added any photos yet, try uploading one now!</p>
    {% endif %}
  </div>
  <div class="row row-cols-1 row-cols-md-2 g-4">
    {% for photo in photos.items %}
      {% if photo.user_uploaded_by == user.username %}
        <div class="col">
          <div class="card">
            <a href="{{ url_for('photos.view_photo', id=photo.id )}}">
              <img src="{{ photo.url }}" class="card-img-top" alt="{{ photo.title }}" />
            </a>
            <div class="card-body">
              <div class="col">
                <h5 class="card-title">{{ photo.title }}</h5>
              </div>
              <div class="row">
                <div class="col">
                  <form method="POST" action="{{ url_for('photos.like_photo', id=photo.id)}}">
                    <button type="submit" 
                      class="btn btn-primary" 
                      name="liked"
                      autocomplete="off"
                    >
                      <i class="fas fa-thumbs-up"></i><span class="badge ms-2">{{ photo.likes }}</span>
                    </button>
                  </form>
                </div>
                <div class="col">
                  <small><i class="fas fa-thumbs-up"></i>: {{ photo.likes }}</small>
                </div>
              </div>
              <small><em>Uploaded by: {{ photo.user_uploaded_by }}</em></small>
              <p class="card-text">
                {{ photo.description }}
              </p>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>
{% endblock %}